---
title: 数组
lang: zh-CN
---

# 数组

什么情况下你应该考虑使用数组？当你有一系列“相似”的数据，例如你做跑酷地图时有几十个检查点坐标需要存放时，你就可以考虑使用“数组”能不能简化你的逻辑了。

## 基础

先介绍几个基本名词：
* 数组：一系列数据的集合。注意，与数学中的集合不同的是，数组内的元素是可以重复的。
* 元素：也称为“值”。集合中的单个数据。
* 下标：游戏中被称为指针，但在编程中一般将它叫做下标或索引。它表示是集合中的第几个，从0开始计数。

例如我们有一个数组是`[10, 20, 30]`，那么20是这个数组的第2个元素，它的下标是1。

数组的基本操作和普通变量一样，分为读取和写入。读取非常简单，使用“数组中的值”即可。写入又分为直接写入下标，或者添加到数组末尾。它们分别使用：

* 设置指针处的全局变量(A, 下标, 值)
* 修改全局变量(A, 添加至数组, 值)

## 结合“下标”读写

假如我们要做一个有很多个检查点的跑酷地图，每次通过一个检查点，我们就需要给玩家创建下一个检查点的光环。如果不使用数组，我们需要写非常多的规则。但是如果使用数组，事情就会变得简单起来：

### 初始化

我们使用变量A来存放所有的检查点：

* 设置全局变量(A, 空数组)
* 修改全局变量(A, 添加至数组, 矢量(0, 0, 0))
* 修改全局变量(A, 添加至数组, 矢量(10, 10, 10))
* 修改全局变量(A, 添加至数组, 矢量(20, 20, 20))
* 修改全局变量(A, 添加至数组, 矢量(30, 30, 30))

玩家一开始的下标是0，我们使用变量B来存放：
* 设置玩家变量(事件玩家, B, 0)
* 创建效果(事件玩家, 有益光环, 绿色, 数组中的值(全局变量, A, 玩家变量(事件玩家, B)), 10.000, 可见, 位置和半径)

另外，关于“创建效果”为什么在这里创建也能达到效果，在[技巧与提示](tips.md)中有简单说明。

### 通过检查点

假设检查点的碰撞半径是10。

事件
* 持续 - 每名玩家

条件
* 范围内玩家(数组中的值(全局变量(A, 玩家变量(事件玩家，B)), 10.000, 所有队伍, 关闭) == 事件玩家

动作
* 修改玩家变量(事件玩家, B, 加, 1)

## 其他

因为变量数量有限（每个玩家只有26个），所以合理利用数组可以让我们可以存储更多数据。但我并不推荐使用数组存储一系列互相无关的数据——从设计的角度来说，这不是好事。另外，直接读取变量肯定比读取数组更快，因此，如果能使用普通变量解决的，那么就不推荐使用数组来解决。